locals {
  secrets       = read_terragrunt_config(find_in_parent_folders("secrets/network/bastion.hcl"))
  instance_name = "{{ instance_name | default('bastion', true) }}"
  settings = {
    size                       = "{{ instance_size | default('t3a.micro', true) }}"
    ebs_size                   = {{ ebs_size | default(10, true) }}
    ebs_iops                   = {{ ebs_iops | default(0, true) }}
    ebs_type                   = "{{ ebs_type | default('gp3', true) }}"
    ebs_block_device_encrypted = {{ ebs_block_device_encrypted | default(false, true) | lower }}
  }
  vpn_cidr                                = "{{ vpn_cidr | default('10.8.0.0/24', true) }}"
  sftp_enable                             = {{ sftp_enable | default(true, true) | lower }}
  custom_sftp_user                        = local.secrets.locals.custom_sftp_user
  efs_infrequent_access_transition_policy = "{{ efs_infrequent_access_transition_policy | default('AFTER_90_DAYS', true) }}"
  cpu_credits                             = "{{ cpu_credits | default ('standard', true) }}"  # Possible Values: standard, unlimited
}
